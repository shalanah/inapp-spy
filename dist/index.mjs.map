{"version":3,"sources":["../src/regex.ts","../src/utils.ts","../src/index.ts"],"sourcesContent":["const appNameRegExps = {\n  messenger: /\\bFB[\\w_]+\\/(Messenger|MESSENGER)/,\n  facebook: /\\bFB[\\w_]+\\//,\n  twitter: /\\bTwitter/i,\n  line: /\\bLine\\//i,\n  wechat: /\\bMicroMessenger\\//i,\n  instagram: /\\bInstagram/i,\n  tiktok: /musical_ly|Bytedance/i, // TODO: fix this\n  snapchat: /Snapchat/i, // TODO: check this\n} as const;\n\nconst inAppRegExps = [\n  \"WebView\",\n  \"(iPhone|iPod|iPad)(?!.*Safari/)\", // Apple devices but not with \"Safari/\" following\n  \"Android.*wv\\\\)\",\n  \"FB_\\\\w|FB\\\\w\", // Match Facebook FB_ or FB then word char\n  \"Snapchat\",\n] as const;\n\nexport const appNames = Object.keys(\n  appNameRegExps\n) as (keyof typeof appNameRegExps)[];\n\nexport const getAppName = (ua: string) =>\n  appNames.find((appName) => appNameRegExps[appName].test(ua));\n\nexport const inappRegex = new RegExp(\n  `${inAppRegExps.map((reg) => `(${reg})`).join(\"|\")}`,\n  \"ig\"\n);\n","export const WIN_ERROR =\n  \"Window is not available and no user agent was provided.\";\n\nexport const getUA = () => {\n  if (typeof window !== \"undefined\") {\n    const ua =\n      window?.navigator?.userAgent ||\n      window?.navigator?.vendor ||\n      // @ts-ignore\n      window?.opera;\n    if (ua) return ua;\n  }\n  console.error(WIN_ERROR);\n  return \"\";\n};\n","import { getAppName, inappRegex } from \"./regex\";\nimport { getUA } from \"./utils\";\n\nconst InAppSpy = (options: { ua?: string } | undefined = {}) => {\n  const { ua } = options;\n  let userAgent = ua || getUA();\n  if (!userAgent) {\n    return {\n      isInApp: false,\n      appName: undefined,\n      ua: userAgent,\n    };\n  }\n\n  const isInApp = userAgent.match(inappRegex) !== null;\n  return {\n    isInApp,\n    appName: isInApp ? getAppName(userAgent) : undefined,\n    ua: userAgent,\n  };\n};\n\nexport default InAppSpy;\n"],"mappings":";AAAA,IAAM,iBAAiB;AAAA,EACrB,WAAW;AAAA,EACX,UAAU;AAAA,EACV,SAAS;AAAA,EACT,MAAM;AAAA,EACN,QAAQ;AAAA,EACR,WAAW;AAAA,EACX,QAAQ;AAAA;AAAA,EACR,UAAU;AAAA;AACZ;AAEA,IAAM,eAAe;AAAA,EACnB;AAAA,EACA;AAAA;AAAA,EACA;AAAA,EACA;AAAA;AAAA,EACA;AACF;AAEO,IAAM,WAAW,OAAO;AAAA,EAC7B;AACF;AAEO,IAAM,aAAa,CAAC,OACzB,SAAS,KAAK,CAAC,YAAY,eAAe,OAAO,EAAE,KAAK,EAAE,CAAC;AAEtD,IAAM,aAAa,IAAI;AAAA,EAC5B,GAAG,aAAa,IAAI,CAAC,QAAQ,IAAI,GAAG,GAAG,EAAE,KAAK,GAAG,CAAC;AAAA,EAClD;AACF;;;AC7BO,IAAM,YACX;AAEK,IAAM,QAAQ,MAAM;AAH3B;AAIE,MAAI,OAAO,WAAW,aAAa;AACjC,UAAM,OACJ,sCAAQ,cAAR,mBAAmB,gBACnB,sCAAQ,cAAR,mBAAmB;AAAA,KAEnB,iCAAQ;AACV,QAAI;AAAI,aAAO;AAAA,EACjB;AACA,UAAQ,MAAM,SAAS;AACvB,SAAO;AACT;;;ACXA,IAAM,WAAW,CAAC,UAAuC,CAAC,MAAM;AAC9D,QAAM,EAAE,GAAG,IAAI;AACf,MAAI,YAAY,MAAM,MAAM;AAC5B,MAAI,CAAC,WAAW;AACd,WAAO;AAAA,MACL,SAAS;AAAA,MACT,SAAS;AAAA,MACT,IAAI;AAAA,IACN;AAAA,EACF;AAEA,QAAM,UAAU,UAAU,MAAM,UAAU,MAAM;AAChD,SAAO;AAAA,IACL;AAAA,IACA,SAAS,UAAU,WAAW,SAAS,IAAI;AAAA,IAC3C,IAAI;AAAA,EACN;AACF;AAEA,IAAO,cAAQ;","names":[]}